{"attributes":{"fieldAttrs":"{\"hivDiagnosis.hivPosFacilityCode\":{\"count\":2}}","fields":"[]","runtimeFieldMap":"{}","timeFieldName":"@timestamp","title":"fhir-report-patient"},"coreMigrationVersion":"7.13.0","id":"58537ec0-f140-11eb-bdb5-4d4ebeaf0cd2","migrationVersion":{"index-pattern":"7.11.0"},"references":[],"sort":[1632298118289,5],"type":"index-pattern","updated_at":"2021-09-22T08:08:38.289Z","version":"WzEwLDFd"}
{"attributes":{"fieldAttrs":"{}","fields":"[]","runtimeFieldMap":"{}","timeFieldName":"hivDiagnosis.hivPosDate","title":"fhir-report-patient-by-hiv"},"coreMigrationVersion":"7.13.0","id":"62c09d50-0a29-11ec-8ecd-811e3f970f27","migrationVersion":{"index-pattern":"7.11.0"},"references":[],"sort":[1632298118289,6],"type":"index-pattern","updated_at":"2021-09-22T08:08:38.289Z","version":"WzExLDFd"}
{"attributes":{"fieldAttrs":"{}","fields":"[]","runtimeFieldMap":"{}","timeFieldName":"artInitiation.date","title":"fhir-report-patient-by-art"},"coreMigrationVersion":"7.13.0","id":"42f0d8a0-0a29-11ec-8ecd-811e3f970f27","migrationVersion":{"index-pattern":"7.11.0"},"references":[],"sort":[1632298118289,7],"type":"index-pattern","updated_at":"2021-09-22T08:08:38.289Z","version":"WzEyLDFd"}
{"attributes":{"fieldAttrs":"{}","fields":"[]","runtimeFieldMap":"{}","timeFieldName":"viralSuppression.current.date","title":"fhir-report-patient-by-curr-vl"},"coreMigrationVersion":"7.13.0","id":"ddf8c1d0-16e2-11ec-a73d-8bf5308b9ada","migrationVersion":{"index-pattern":"7.11.0"},"references":[],"sort":[1632298118289,8],"type":"index-pattern","updated_at":"2021-09-22T08:08:38.289Z","version":"WzEzLDFd"}
{"attributes":{"fieldAttrs":"{}","fields":"[]","runtimeFieldMap":"{}","timeFieldName":"death.date","title":"fhir-report-patient-by-death"},"coreMigrationVersion":"7.13.0","id":"241aeff0-16f0-11ec-a73d-8bf5308b9ada","migrationVersion":{"index-pattern":"7.11.0"},"references":[],"sort":[1632298118289,9],"type":"index-pattern","updated_at":"2021-09-22T08:08:38.289Z","version":"WzE0LDFd"}
{"attributes":{"description":"","hits":0,"kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"language\":\"kuery\",\"query\":\"\"},\"filter\":[]}"},"optionsJSON":"{\"hidePanelTitles\":false,\"useMargins\":true}","panelsJSON":"[{\"version\":\"7.13.0\",\"type\":\"visualization\",\"gridData\":{\"x\":0,\"y\":0,\"w\":48,\"h\":7,\"i\":\"05a48a00-29e2-4712-9fab-d0cd1aea6859\"},\"panelIndex\":\"05a48a00-29e2-4712-9fab-d0cd1aea6859\",\"embeddableConfig\":{\"savedVis\":{\"title\":\"\",\"description\":\"\",\"type\":\"markdown\",\"params\":{\"fontSize\":16,\"openLinksInNewTab\":true,\"markdown\":\"# HIV Case Based Surveillance Dashboard\\n\\n[View tabular report with graphs](http://localhost:5488/templates/6QHBqntgyC)\"},\"uiState\":{},\"data\":{\"aggs\":[],\"searchSource\":{\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filter\":[]}}},\"enhancements\":{}}},{\"version\":\"7.13.0\",\"type\":\"visualization\",\"gridData\":{\"x\":0,\"y\":7,\"w\":48,\"h\":5,\"i\":\"305f7719-e22c-4e20-952d-ddee1311dec4\"},\"panelIndex\":\"305f7719-e22c-4e20-952d-ddee1311dec4\",\"embeddableConfig\":{\"savedVis\":{\"title\":\"\",\"description\":\"\",\"type\":\"input_control_vis\",\"params\":{\"controls\":[{\"id\":\"1630392691840\",\"fieldName\":\"registration.facility.state\",\"parent\":\"\",\"label\":\"State\",\"type\":\"list\",\"options\":{\"type\":\"terms\",\"multiselect\":true,\"dynamicOptions\":true,\"size\":5,\"order\":\"desc\"},\"indexPatternRefName\":\"control_305f7719-e22c-4e20-952d-ddee1311dec4_0_index_pattern\"},{\"id\":\"1630392713043\",\"fieldName\":\"registration.facility.district\",\"parent\":\"\",\"label\":\"District\",\"type\":\"list\",\"options\":{\"type\":\"terms\",\"multiselect\":true,\"dynamicOptions\":true,\"size\":5,\"order\":\"desc\"},\"indexPatternRefName\":\"control_305f7719-e22c-4e20-952d-ddee1311dec4_1_index_pattern\"},{\"id\":\"1630392724519\",\"fieldName\":\"registration.facility.city\",\"parent\":\"\",\"label\":\"City\",\"type\":\"list\",\"options\":{\"type\":\"terms\",\"multiselect\":true,\"dynamicOptions\":true,\"size\":5,\"order\":\"desc\"},\"indexPatternRefName\":\"control_305f7719-e22c-4e20-952d-ddee1311dec4_2_index_pattern\"},{\"id\":\"1630392744216\",\"fieldName\":\"registration.facility.name\",\"parent\":\"\",\"label\":\"Facility\",\"type\":\"list\",\"options\":{\"type\":\"terms\",\"multiselect\":true,\"dynamicOptions\":true,\"size\":5,\"order\":\"desc\"},\"indexPatternRefName\":\"control_305f7719-e22c-4e20-952d-ddee1311dec4_3_index_pattern\"}],\"updateFiltersOnChange\":true,\"useTimeFilter\":true,\"pinFilters\":false},\"uiState\":{},\"data\":{\"aggs\":[],\"searchSource\":{\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filter\":[]}}},\"enhancements\":{},\"hidePanelTitles\":false},\"title\":\"Location\"},{\"version\":\"7.13.0\",\"type\":\"lens\",\"gridData\":{\"x\":0,\"y\":12,\"w\":10,\"h\":11,\"i\":\"e0cd82f3-929a-4c32-91f6-7f8689fbe7d8\"},\"panelIndex\":\"e0cd82f3-929a-4c32-91f6-7f8689fbe7d8\",\"embeddableConfig\":{\"attributes\":{\"title\":\"\",\"type\":\"lens\",\"visualizationType\":\"lnsMetric\",\"state\":{\"datasourceStates\":{\"indexpattern\":{\"layers\":{\"8a786d61-2078-441e-922c-ae1ed584d917\":{\"columns\":{\"d52de0ad-c343-42ad-8741-3e80fed7d8bb\":{\"label\":\"HIV+ve people\",\"dataType\":\"number\",\"operationType\":\"unique_count\",\"scale\":\"ratio\",\"sourceField\":\"registration.golden_id_fingerprint\",\"isBucketed\":false,\"filter\":{\"query\":\"hivDiagnosis.hivPosDate : *\",\"language\":\"kuery\"},\"customLabel\":true}},\"columnOrder\":[\"d52de0ad-c343-42ad-8741-3e80fed7d8bb\"],\"incompleteColumns\":{}}}}},\"visualization\":{\"layerId\":\"8a786d61-2078-441e-922c-ae1ed584d917\",\"accessor\":\"d52de0ad-c343-42ad-8741-3e80fed7d8bb\"},\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filters\":[]},\"references\":[{\"type\":\"index-pattern\",\"id\":\"62c09d50-0a29-11ec-8ecd-811e3f970f27\",\"name\":\"indexpattern-datasource-current-indexpattern\"},{\"type\":\"index-pattern\",\"id\":\"62c09d50-0a29-11ec-8ecd-811e3f970f27\",\"name\":\"indexpattern-datasource-layer-8a786d61-2078-441e-922c-ae1ed584d917\"}]},\"enhancements\":{}}},{\"version\":\"7.13.0\",\"type\":\"lens\",\"gridData\":{\"x\":10,\"y\":12,\"w\":10,\"h\":11,\"i\":\"d467e200-d740-43cf-8b3a-ab1a406c1712\"},\"panelIndex\":\"d467e200-d740-43cf-8b3a-ab1a406c1712\",\"embeddableConfig\":{\"attributes\":{\"title\":\"\",\"type\":\"lens\",\"visualizationType\":\"lnsMetric\",\"state\":{\"datasourceStates\":{\"indexpattern\":{\"layers\":{\"3e7fbee0-0ce5-4752-bcc9-766b1d4cd06e\":{\"columns\":{\"c26672cf-588a-4ec8-baa0-5511c499c6d0\":{\"label\":\"People who entered care\",\"dataType\":\"number\",\"operationType\":\"unique_count\",\"scale\":\"ratio\",\"sourceField\":\"registration.golden_id_fingerprint\",\"isBucketed\":false,\"filter\":{\"query\":\"entryToCare.enrollmentDate : *\",\"language\":\"kuery\"},\"customLabel\":true}},\"columnOrder\":[\"c26672cf-588a-4ec8-baa0-5511c499c6d0\"],\"incompleteColumns\":{}}}}},\"visualization\":{\"layerId\":\"3e7fbee0-0ce5-4752-bcc9-766b1d4cd06e\",\"accessor\":\"c26672cf-588a-4ec8-baa0-5511c499c6d0\"},\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filters\":[]},\"references\":[{\"type\":\"index-pattern\",\"id\":\"42f0d8a0-0a29-11ec-8ecd-811e3f970f27\",\"name\":\"indexpattern-datasource-current-indexpattern\"},{\"type\":\"index-pattern\",\"id\":\"42f0d8a0-0a29-11ec-8ecd-811e3f970f27\",\"name\":\"indexpattern-datasource-layer-3e7fbee0-0ce5-4752-bcc9-766b1d4cd06e\"}]},\"enhancements\":{}}},{\"version\":\"7.13.0\",\"type\":\"lens\",\"gridData\":{\"x\":20,\"y\":12,\"w\":10,\"h\":11,\"i\":\"a06e3da3-cacf-4ea6-a880-1f5b07b125ce\"},\"panelIndex\":\"a06e3da3-cacf-4ea6-a880-1f5b07b125ce\",\"embeddableConfig\":{\"attributes\":{\"title\":\"\",\"type\":\"lens\",\"visualizationType\":\"lnsMetric\",\"state\":{\"datasourceStates\":{\"indexpattern\":{\"layers\":{\"ae112681-072e-448e-991c-7443fd69bce6\":{\"columns\":{\"06c61ee2-e8a1-4c4f-9bca-7cff0df419d1\":{\"label\":\"HIV +ve people on ART\",\"dataType\":\"number\",\"operationType\":\"unique_count\",\"scale\":\"ratio\",\"sourceField\":\"registration.golden_id_fingerprint\",\"isBucketed\":false,\"filter\":{\"query\":\"artInitiation.date : *\",\"language\":\"kuery\"},\"customLabel\":true}},\"columnOrder\":[\"06c61ee2-e8a1-4c4f-9bca-7cff0df419d1\"],\"incompleteColumns\":{}}}}},\"visualization\":{\"layerId\":\"ae112681-072e-448e-991c-7443fd69bce6\",\"accessor\":\"06c61ee2-e8a1-4c4f-9bca-7cff0df419d1\"},\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filters\":[]},\"references\":[{\"type\":\"index-pattern\",\"id\":\"42f0d8a0-0a29-11ec-8ecd-811e3f970f27\",\"name\":\"indexpattern-datasource-current-indexpattern\"},{\"type\":\"index-pattern\",\"id\":\"42f0d8a0-0a29-11ec-8ecd-811e3f970f27\",\"name\":\"indexpattern-datasource-layer-ae112681-072e-448e-991c-7443fd69bce6\"}]},\"enhancements\":{}}},{\"version\":\"7.13.0\",\"type\":\"lens\",\"gridData\":{\"x\":30,\"y\":12,\"w\":9,\"h\":11,\"i\":\"6ae8c2b2-6bd4-4354-81be-914d0ea0dec0\"},\"panelIndex\":\"6ae8c2b2-6bd4-4354-81be-914d0ea0dec0\",\"embeddableConfig\":{\"attributes\":{\"title\":\"\",\"type\":\"lens\",\"visualizationType\":\"lnsMetric\",\"state\":{\"datasourceStates\":{\"indexpattern\":{\"layers\":{\"ae112681-072e-448e-991c-7443fd69bce6\":{\"columns\":{\"06c61ee2-e8a1-4c4f-9bca-7cff0df419d1\":{\"label\":\"HIV +ve people virally suppressed\",\"dataType\":\"number\",\"operationType\":\"unique_count\",\"scale\":\"ratio\",\"sourceField\":\"registration.golden_id_fingerprint\",\"isBucketed\":false,\"filter\":{\"query\":\"viralSuppression.currentStatus : \\\"Suppressed\\\" \",\"language\":\"kuery\"},\"customLabel\":true}},\"columnOrder\":[\"06c61ee2-e8a1-4c4f-9bca-7cff0df419d1\"],\"incompleteColumns\":{}}}}},\"visualization\":{\"layerId\":\"ae112681-072e-448e-991c-7443fd69bce6\",\"accessor\":\"06c61ee2-e8a1-4c4f-9bca-7cff0df419d1\"},\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filters\":[]},\"references\":[{\"type\":\"index-pattern\",\"id\":\"ddf8c1d0-16e2-11ec-a73d-8bf5308b9ada\",\"name\":\"indexpattern-datasource-current-indexpattern\"},{\"type\":\"index-pattern\",\"id\":\"ddf8c1d0-16e2-11ec-a73d-8bf5308b9ada\",\"name\":\"indexpattern-datasource-layer-ae112681-072e-448e-991c-7443fd69bce6\"}]},\"enhancements\":{}}},{\"version\":\"7.13.0\",\"type\":\"lens\",\"gridData\":{\"x\":39,\"y\":12,\"w\":9,\"h\":11,\"i\":\"78f110ee-d0c6-4d10-bdce-a36957759572\"},\"panelIndex\":\"78f110ee-d0c6-4d10-bdce-a36957759572\",\"embeddableConfig\":{\"attributes\":{\"title\":\"\",\"type\":\"lens\",\"visualizationType\":\"lnsMetric\",\"state\":{\"datasourceStates\":{\"indexpattern\":{\"layers\":{\"8a786d61-2078-441e-922c-ae1ed584d917\":{\"columns\":{\"d52de0ad-c343-42ad-8741-3e80fed7d8bb\":{\"label\":\"HIV+ve people that have died\",\"dataType\":\"number\",\"operationType\":\"unique_count\",\"scale\":\"ratio\",\"sourceField\":\"registration.golden_id_fingerprint\",\"isBucketed\":false,\"filter\":{\"query\":\"death.date : * and hivDiagnosis.hivPosDate : *\",\"language\":\"kuery\"},\"customLabel\":true}},\"columnOrder\":[\"d52de0ad-c343-42ad-8741-3e80fed7d8bb\"],\"incompleteColumns\":{}}}}},\"visualization\":{\"layerId\":\"8a786d61-2078-441e-922c-ae1ed584d917\",\"accessor\":\"d52de0ad-c343-42ad-8741-3e80fed7d8bb\"},\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filters\":[]},\"references\":[{\"type\":\"index-pattern\",\"id\":\"241aeff0-16f0-11ec-a73d-8bf5308b9ada\",\"name\":\"indexpattern-datasource-current-indexpattern\"},{\"type\":\"index-pattern\",\"id\":\"241aeff0-16f0-11ec-a73d-8bf5308b9ada\",\"name\":\"indexpattern-datasource-layer-8a786d61-2078-441e-922c-ae1ed584d917\"}]},\"enhancements\":{}}},{\"version\":\"7.13.0\",\"type\":\"visualization\",\"gridData\":{\"x\":0,\"y\":23,\"w\":21,\"h\":20,\"i\":\"306d2cbb-b5c0-4111-990a-9390fa4e29ee\"},\"panelIndex\":\"306d2cbb-b5c0-4111-990a-9390fa4e29ee\",\"embeddableConfig\":{\"savedVis\":{\"title\":\"\",\"description\":\"\",\"type\":\"vega\",\"params\":{\"spec\":\"{\\n  $schema: https://vega.github.io/schema/vega-lite/v5.json\\n  data: {\\n    url: {\\n      %context%: true\\n      %timefield%: hivDiagnosis.hivPosDate\\n      index: fhir-report-patient\\n      body: {\\n        size: 0\\n        aggs: {\\n          age: {\\n            range: {\\n              script: {\\n                source: if (doc['registration.birthDate'].size()==0) { return null } ZonedDateTime dob = doc['registration.birthDate'].value;Instant i = Instant.ofEpochMilli(params.reportPeriodEnd); ZonedDateTime end = ZonedDateTime.ofInstant(i, ZoneOffset.UTC);return dob.until(end, ChronoUnit.YEARS);\\n                params: {\\n                  reportPeriodEnd: {\\n                    %timefilter%: max\\n                  }\\n                }\\n              }\\n              ranges: [\\n                {\\n                  key: 0-4\\n                  to: 5\\n                }\\n                {\\n                  key: 05-9\\n                  from: 5\\n                  to: 10\\n                }\\n                {\\n                  key: 10-14\\n                  from: 10\\n                  to: 15\\n                }\\n                {\\n                  key: 15-19\\n                  from: 15\\n                  to: 20\\n                }\\n                {\\n                  key: 20-24\\n                  from: 20\\n                  to: 25\\n                }\\n                {\\n                  key: 25-29\\n                  from: 25\\n                  to: 30\\n                }\\n                {\\n                  key: 30-24\\n                  from: 30\\n                  to: 35\\n                }\\n                {\\n                  key: 35-39\\n                  from: 35\\n                  to: 40\\n                }\\n                {\\n                  key: 40-44\\n                  from: 40\\n                  to: 45\\n                }\\n                {\\n                  key: 45-49\\n                  from: 45\\n                  to: 50\\n                }\\n                {\\n                  key: 50-54\\n                  from: 50\\n                  to: 55\\n                }\\n                {\\n                  key: 55-59\\n                  from: 55\\n                  to: 60\\n                }\\n                {\\n                  key: 60-64\\n                  from: 60\\n                  to: 65\\n                }\\n                {\\n                  key: 65+\\n                  from: 65\\n                }\\n              ]\\n            }\\n            aggs: {\\n              gender: {\\n                terms: {\\n                  field: registration.gender\\n                  min_doc_count: 0\\n                }\\n              }\\n            }\\n          }\\n        }\\n      }\\n    }\\n    format: {\\n      property: aggregations.age.buckets\\n    }\\n  }\\n  transform: [\\n    {\\n      flatten: [\\n        gender.buckets\\n      ]\\n      as: [\\n        gender_flat\\n      ]\\n    }\\n    {\\n      joinaggregate: [\\n        {\\n          op: sum\\n          field: gender_flat.doc_count\\n          as: total\\n        }\\n      ]\\n    }\\n    {\\n      calculate: datum.gender_flat.doc_count/datum.total * 100\\n      as: percentage\\n    }\\n  ]\\n  facet: {\\n    field: key\\n    title: Age group\\n  }\\n  spec: {\\n    mark: {\\n      type: bar\\n      tooltip: true\\n    }\\n    width: 40\\n    height: 400\\n    encoding: {\\n      y: {\\n        field: percentage\\n        type: quantitative\\n        title: % of cases\\n      }\\n      x: {\\n        field: gender_flat.key\\n        title: Gender\\n        axis: {\\n          title: \\\"\\\"\\n        }\\n      }\\n      color: {\\n        field: gender_flat.key\\n        title: Gender\\n      }\\n    }\\n  }\\n  config: {\\n    view: {\\n      stroke: transparent\\n    }\\n    axis: {\\n      domainWidth: 1\\n    }\\n    kibana: {\\n      hideWarnings: true\\n    }\\n  }\\n}\"},\"uiState\":{},\"data\":{\"aggs\":[],\"searchSource\":{\"query\":{\"language\":\"kuery\",\"query\":\"\"},\"filter\":[]}}},\"hidePanelTitles\":false,\"enhancements\":{}},\"title\":\"New HIV diagnosis by age and sex\"},{\"version\":\"7.13.0\",\"type\":\"lens\",\"gridData\":{\"x\":21,\"y\":23,\"w\":14,\"h\":20,\"i\":\"d959c77c-f798-4680-89a2-7d568bd3960a\"},\"panelIndex\":\"d959c77c-f798-4680-89a2-7d568bd3960a\",\"embeddableConfig\":{\"attributes\":{\"title\":\"\",\"type\":\"lens\",\"visualizationType\":\"lnsXY\",\"state\":{\"datasourceStates\":{\"indexpattern\":{\"layers\":{\"67f7ed30-e2ae-4328-8c29-14bee1247225\":{\"columns\":{\"6ee2b1fa-1b72-466f-8299-327324cf5b7c\":{\"label\":\"Top values of registration.gender\",\"dataType\":\"string\",\"operationType\":\"terms\",\"scale\":\"ordinal\",\"sourceField\":\"registration.gender\",\"isBucketed\":true,\"params\":{\"size\":5,\"orderBy\":{\"type\":\"alphabetical\",\"fallback\":true},\"orderDirection\":\"asc\",\"otherBucket\":false,\"missingBucket\":false}},\"0551765e-6306-4041-ad18-02a07998be72\":{\"label\":\"HIV+ve diagnosis date\",\"dataType\":\"date\",\"operationType\":\"date_histogram\",\"sourceField\":\"hivDiagnosis.hivPosDate\",\"isBucketed\":true,\"scale\":\"interval\",\"params\":{\"interval\":\"1M\"},\"customLabel\":true},\"164a37ea-8caf-4c6d-8782-737c8993060e\":{\"label\":\"Count of records\",\"dataType\":\"number\",\"operationType\":\"count\",\"isBucketed\":false,\"scale\":\"ratio\",\"sourceField\":\"Records\"},\"23d6ca2a-0fd1-4feb-b065-08b4faa15166\":{\"label\":\"Cumulative number of cases\",\"dataType\":\"number\",\"operationType\":\"cumulative_sum\",\"isBucketed\":false,\"scale\":\"ratio\",\"references\":[\"164a37ea-8caf-4c6d-8782-737c8993060e\"],\"customLabel\":true}},\"columnOrder\":[\"6ee2b1fa-1b72-466f-8299-327324cf5b7c\",\"0551765e-6306-4041-ad18-02a07998be72\",\"164a37ea-8caf-4c6d-8782-737c8993060e\",\"23d6ca2a-0fd1-4feb-b065-08b4faa15166\"],\"incompleteColumns\":{}}}}},\"visualization\":{\"legend\":{\"isVisible\":true,\"position\":\"right\"},\"valueLabels\":\"hide\",\"fittingFunction\":\"None\",\"axisTitlesVisibilitySettings\":{\"x\":true,\"yLeft\":true,\"yRight\":true},\"tickLabelsVisibilitySettings\":{\"x\":true,\"yLeft\":true,\"yRight\":true},\"gridlinesVisibilitySettings\":{\"x\":true,\"yLeft\":true,\"yRight\":true},\"preferredSeriesType\":\"area_stacked\",\"layers\":[{\"layerId\":\"67f7ed30-e2ae-4328-8c29-14bee1247225\",\"accessors\":[\"23d6ca2a-0fd1-4feb-b065-08b4faa15166\"],\"position\":\"top\",\"seriesType\":\"area_stacked\",\"showGridlines\":false,\"splitAccessor\":\"6ee2b1fa-1b72-466f-8299-327324cf5b7c\",\"yConfig\":[{\"forAccessor\":\"23d6ca2a-0fd1-4feb-b065-08b4faa15166\",\"axisMode\":\"auto\"}],\"xAccessor\":\"0551765e-6306-4041-ad18-02a07998be72\"}]},\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filters\":[]},\"references\":[{\"type\":\"index-pattern\",\"id\":\"62c09d50-0a29-11ec-8ecd-811e3f970f27\",\"name\":\"indexpattern-datasource-current-indexpattern\"},{\"type\":\"index-pattern\",\"id\":\"62c09d50-0a29-11ec-8ecd-811e3f970f27\",\"name\":\"indexpattern-datasource-layer-67f7ed30-e2ae-4328-8c29-14bee1247225\"}]},\"enhancements\":{},\"hidePanelTitles\":false},\"title\":\"Cumulative HIV cases over time\"},{\"version\":\"7.13.0\",\"type\":\"map\",\"gridData\":{\"x\":35,\"y\":23,\"w\":13,\"h\":20,\"i\":\"4ec419d1-6589-49e8-9f49-bedfd518d475\"},\"panelIndex\":\"4ec419d1-6589-49e8-9f49-bedfd518d475\",\"embeddableConfig\":{\"attributes\":{\"title\":\"\",\"description\":\"\",\"layerListJSON\":\"[{\\\"sourceDescriptor\\\":{\\\"type\\\":\\\"EMS_TMS\\\",\\\"id\\\":\\\"road_map_desaturated\\\",\\\"isAutoSelect\\\":false},\\\"id\\\":\\\"7bcd95c7-81fb-4df6-9745-a646d7177729\\\",\\\"label\\\":null,\\\"minZoom\\\":0,\\\"maxZoom\\\":24,\\\"alpha\\\":1,\\\"visible\\\":true,\\\"style\\\":{\\\"type\\\":\\\"TILE\\\"},\\\"type\\\":\\\"VECTOR_TILE\\\"},{\\\"sourceDescriptor\\\":{\\\"indexPatternId\\\":\\\"62c09d50-0a29-11ec-8ecd-811e3f970f27\\\",\\\"geoField\\\":\\\"hivDiagnosis.facility.position\\\",\\\"requestType\\\":\\\"point\\\",\\\"id\\\":\\\"8546b79f-a473-4905-898b-bf4dd5c75f52\\\",\\\"type\\\":\\\"ES_GEO_GRID\\\",\\\"applyGlobalQuery\\\":true,\\\"applyGlobalTime\\\":true,\\\"metrics\\\":[{\\\"type\\\":\\\"count\\\",\\\"label\\\":\\\"Unique cases\\\"}],\\\"resolution\\\":\\\"FINE\\\"},\\\"style\\\":{\\\"type\\\":\\\"VECTOR\\\",\\\"properties\\\":{\\\"icon\\\":{\\\"type\\\":\\\"STATIC\\\",\\\"options\\\":{\\\"value\\\":\\\"marker\\\"}},\\\"fillColor\\\":{\\\"type\\\":\\\"STATIC\\\",\\\"options\\\":{\\\"color\\\":\\\"#6092C0\\\"}},\\\"lineColor\\\":{\\\"type\\\":\\\"STATIC\\\",\\\"options\\\":{\\\"color\\\":\\\"#FFF\\\"}},\\\"lineWidth\\\":{\\\"type\\\":\\\"STATIC\\\",\\\"options\\\":{\\\"size\\\":0}},\\\"iconSize\\\":{\\\"type\\\":\\\"DYNAMIC\\\",\\\"options\\\":{\\\"minSize\\\":7,\\\"maxSize\\\":32,\\\"field\\\":{\\\"origin\\\":\\\"source\\\",\\\"name\\\":\\\"doc_count\\\"},\\\"fieldMetaOptions\\\":{\\\"isEnabled\\\":true,\\\"sigma\\\":3}}},\\\"iconOrientation\\\":{\\\"type\\\":\\\"STATIC\\\",\\\"options\\\":{\\\"orientation\\\":0}},\\\"labelText\\\":{\\\"type\\\":\\\"DYNAMIC\\\",\\\"options\\\":{\\\"field\\\":{\\\"origin\\\":\\\"source\\\",\\\"name\\\":\\\"doc_count\\\"}}},\\\"labelColor\\\":{\\\"type\\\":\\\"STATIC\\\",\\\"options\\\":{\\\"color\\\":\\\"#000000\\\"}},\\\"labelSize\\\":{\\\"type\\\":\\\"STATIC\\\",\\\"options\\\":{\\\"size\\\":14}},\\\"labelBorderColor\\\":{\\\"type\\\":\\\"STATIC\\\",\\\"options\\\":{\\\"color\\\":\\\"#FFFFFF\\\"}},\\\"symbolizeAs\\\":{\\\"options\\\":{\\\"value\\\":\\\"circle\\\"}},\\\"labelBorderSize\\\":{\\\"options\\\":{\\\"size\\\":\\\"SMALL\\\"}}},\\\"isTimeAware\\\":true},\\\"id\\\":\\\"1dd7c46b-a241-4af9-98aa-eb7a94a6c703\\\",\\\"label\\\":\\\"New HIV +ve cases\\\",\\\"minZoom\\\":0,\\\"maxZoom\\\":24,\\\"alpha\\\":0.75,\\\"visible\\\":true,\\\"type\\\":\\\"VECTOR\\\",\\\"joins\\\":[]},{\\\"sourceDescriptor\\\":{\\\"indexPatternId\\\":\\\"62c09d50-0a29-11ec-8ecd-811e3f970f27\\\",\\\"geoField\\\":\\\"hivDiagnosis.facility.position\\\",\\\"requestType\\\":\\\"point\\\",\\\"id\\\":\\\"b243fe37-dd9d-4f1e-8f6b-6620cdee4e66\\\",\\\"type\\\":\\\"ES_GEO_GRID\\\",\\\"applyGlobalQuery\\\":true,\\\"applyGlobalTime\\\":true,\\\"metrics\\\":[{\\\"label\\\":\\\"Unique cases\\\",\\\"type\\\":\\\"cardinality\\\",\\\"field\\\":\\\"registration.golden_id_fingerprint\\\"}],\\\"resolution\\\":\\\"FINE\\\"},\\\"style\\\":{\\\"type\\\":\\\"VECTOR\\\",\\\"properties\\\":{\\\"icon\\\":{\\\"type\\\":\\\"STATIC\\\",\\\"options\\\":{\\\"value\\\":\\\"square\\\"}},\\\"fillColor\\\":{\\\"type\\\":\\\"STATIC\\\",\\\"options\\\":{\\\"color\\\":\\\"#E7664C\\\"}},\\\"lineColor\\\":{\\\"type\\\":\\\"STATIC\\\",\\\"options\\\":{\\\"color\\\":\\\"#FFF\\\"}},\\\"lineWidth\\\":{\\\"type\\\":\\\"STATIC\\\",\\\"options\\\":{\\\"size\\\":0}},\\\"iconSize\\\":{\\\"type\\\":\\\"DYNAMIC\\\",\\\"options\\\":{\\\"minSize\\\":7,\\\"maxSize\\\":32,\\\"field\\\":{\\\"origin\\\":\\\"source\\\",\\\"name\\\":\\\"cardinality_of_registration.golden_id_fingerprint\\\"},\\\"fieldMetaOptions\\\":{\\\"isEnabled\\\":true,\\\"sigma\\\":3}}},\\\"iconOrientation\\\":{\\\"type\\\":\\\"STATIC\\\",\\\"options\\\":{\\\"orientation\\\":0}},\\\"labelText\\\":{\\\"type\\\":\\\"DYNAMIC\\\",\\\"options\\\":{\\\"field\\\":{\\\"origin\\\":\\\"source\\\",\\\"name\\\":\\\"cardinality_of_registration.golden_id_fingerprint\\\"}}},\\\"labelColor\\\":{\\\"type\\\":\\\"STATIC\\\",\\\"options\\\":{\\\"color\\\":\\\"#000000\\\"}},\\\"labelSize\\\":{\\\"type\\\":\\\"STATIC\\\",\\\"options\\\":{\\\"size\\\":14}},\\\"labelBorderColor\\\":{\\\"type\\\":\\\"STATIC\\\",\\\"options\\\":{\\\"color\\\":\\\"#FFFFFF\\\"}},\\\"symbolizeAs\\\":{\\\"options\\\":{\\\"value\\\":\\\"icon\\\"}},\\\"labelBorderSize\\\":{\\\"options\\\":{\\\"size\\\":\\\"SMALL\\\"}}},\\\"isTimeAware\\\":true},\\\"id\\\":\\\"b1f8ded3-41dd-4874-a7d5-3fc27d5ae31d\\\",\\\"label\\\":\\\"Recent infection HIV +ve cases\\\",\\\"minZoom\\\":0,\\\"maxZoom\\\":24,\\\"alpha\\\":0.75,\\\"visible\\\":true,\\\"type\\\":\\\"VECTOR\\\",\\\"joins\\\":[],\\\"query\\\":{\\\"query\\\":\\\"hivDiagnosis.recencyStatus : \\\\\\\"Recent\\\\\\\" \\\",\\\"language\\\":\\\"kuery\\\"}}]\",\"mapStateJSON\":\"{\\\"zoom\\\":12.52,\\\"center\\\":{\\\"lon\\\":24.05,\\\"lat\\\":-30.05002},\\\"timeFilters\\\":{\\\"from\\\":\\\"now-10y\\\",\\\"to\\\":\\\"now\\\"},\\\"refreshConfig\\\":{\\\"isPaused\\\":true,\\\"interval\\\":0},\\\"query\\\":{\\\"query\\\":\\\"\\\",\\\"language\\\":\\\"kuery\\\"},\\\"filters\\\":[],\\\"settings\\\":{\\\"autoFitToDataBounds\\\":false,\\\"backgroundColor\\\":\\\"#ffffff\\\",\\\"disableInteractive\\\":false,\\\"disableTooltipControl\\\":false,\\\"hideToolbarOverlay\\\":false,\\\"hideLayerControl\\\":false,\\\"hideViewControl\\\":false,\\\"initialLocation\\\":\\\"AUTO_FIT_TO_BOUNDS\\\",\\\"fixedLocation\\\":{\\\"lat\\\":0,\\\"lon\\\":0,\\\"zoom\\\":2},\\\"browserLocation\\\":{\\\"zoom\\\":2},\\\"maxZoom\\\":24,\\\"minZoom\\\":0,\\\"showScaleControl\\\":false,\\\"showSpatialFilters\\\":true,\\\"spatialFiltersAlpa\\\":0.3,\\\"spatialFiltersFillColor\\\":\\\"#DA8B45\\\",\\\"spatialFiltersLineColor\\\":\\\"#DA8B45\\\"}}\",\"uiStateJSON\":\"{\\\"isLayerTOCOpen\\\":true,\\\"openTOCDetails\\\":[]}\"},\"mapCenter\":{\"lat\":-30.05002,\"lon\":24.05,\"zoom\":11.29},\"isLayerTOCOpen\":false,\"openTOCDetails\":[],\"hiddenLayers\":[],\"enhancements\":{},\"hidePanelTitles\":false,\"mapBuffer\":{\"minLon\":23.88976,\"minLat\":-30.177765,\"maxLon\":24.210240000000002,\"maxLat\":-29.922224999999997}},\"title\":\"Heat map of HIV +ve cases\"},{\"version\":\"7.13.0\",\"type\":\"visualization\",\"gridData\":{\"x\":0,\"y\":43,\"w\":21,\"h\":20,\"i\":\"a47654e2-ba5f-4f97-82b7-d01f4ef087e2\"},\"panelIndex\":\"a47654e2-ba5f-4f97-82b7-d01f4ef087e2\",\"embeddableConfig\":{\"savedVis\":{\"title\":\"\",\"description\":\"\",\"type\":\"vega\",\"params\":{\"spec\":\"{\\n  $schema: https://vega.github.io/schema/vega-lite/v5.json\\n  data: {\\n    url: {\\n      %context%: true\\n      %timefield%: artInitiation.date\\n      index: fhir-report-patient\\n      body: {\\n        size: 0\\n        aggs: {\\n          age: {\\n            range: {\\n              script: {\\n                source: if (doc['registration.birthDate'].size()==0) { return null } ZonedDateTime dob = doc['registration.birthDate'].value;Instant i = Instant.ofEpochMilli(params.reportPeriodEnd); ZonedDateTime end = ZonedDateTime.ofInstant(i, ZoneOffset.UTC);return dob.until(end, ChronoUnit.YEARS);\\n                params: {\\n                  reportPeriodEnd: {\\n                    %timefilter%: max\\n                  }\\n                }\\n              }\\n              ranges: [\\n                {\\n                  key: 0-4\\n                  to: 5\\n                }\\n                {\\n                  key: 05-9\\n                  from: 5\\n                  to: 10\\n                }\\n                {\\n                  key: 10-14\\n                  from: 10\\n                  to: 15\\n                }\\n                {\\n                  key: 15-19\\n                  from: 15\\n                  to: 20\\n                }\\n                {\\n                  key: 20-24\\n                  from: 20\\n                  to: 25\\n                }\\n                {\\n                  key: 25-29\\n                  from: 25\\n                  to: 30\\n                }\\n                {\\n                  key: 30-24\\n                  from: 30\\n                  to: 35\\n                }\\n                {\\n                  key: 35-39\\n                  from: 35\\n                  to: 40\\n                }\\n                {\\n                  key: 40-44\\n                  from: 40\\n                  to: 45\\n                }\\n                {\\n                  key: 45-49\\n                  from: 45\\n                  to: 50\\n                }\\n                {\\n                  key: 50-54\\n                  from: 50\\n                  to: 55\\n                }\\n                {\\n                  key: 55-59\\n                  from: 55\\n                  to: 60\\n                }\\n                {\\n                  key: 60-64\\n                  from: 60\\n                  to: 65\\n                }\\n                {\\n                  key: 65+\\n                  from: 65\\n                }\\n              ]\\n            }\\n            aggs: {\\n              gender: {\\n                terms: {\\n                  field: registration.gender\\n                  min_doc_count: 0\\n                }\\n              }\\n            }\\n          }\\n        }\\n      }\\n    }\\n    format: {\\n      property: aggregations.age.buckets\\n    }\\n  }\\n  transform: [\\n    {\\n      flatten: [\\n        gender.buckets\\n      ]\\n      as: [\\n        gender_flat\\n      ]\\n    }\\n    {\\n      joinaggregate: [\\n        {\\n          op: sum\\n          field: gender_flat.doc_count\\n          as: total\\n        }\\n      ]\\n    }\\n    {\\n      calculate: datum.gender_flat.doc_count/datum.total * 100\\n      as: percentage\\n    }\\n  ]\\n  facet: {\\n    field: key\\n    title: Age group\\n  }\\n  spec: {\\n    mark: {\\n      type: bar\\n      tooltip: true\\n    }\\n    width: 40\\n    height: 400\\n    encoding: {\\n      y: {\\n        field: percentage\\n        type: quantitative\\n        title: % of cases\\n      }\\n      x: {\\n        field: gender_flat.key\\n        title: Gender\\n        axis: {\\n          title: \\\"\\\"\\n        }\\n      }\\n      color: {\\n        field: gender_flat.key\\n        title: Gender\\n      }\\n    }\\n  }\\n  config: {\\n    view: {\\n      stroke: transparent\\n    }\\n    axis: {\\n      domainWidth: 1\\n    }\\n    kibana: {\\n      hideWarnings: true\\n    }\\n  }\\n}\"},\"uiState\":{},\"data\":{\"aggs\":[],\"searchSource\":{\"query\":{\"language\":\"kuery\",\"query\":\"\"},\"filter\":[]}}},\"hidePanelTitles\":false,\"enhancements\":{}},\"title\":\"Newly started ART patients by age and sex\"},{\"version\":\"7.13.0\",\"type\":\"lens\",\"gridData\":{\"x\":21,\"y\":43,\"w\":14,\"h\":20,\"i\":\"86c73d19-ecb7-4c02-a686-86f71ee27e5a\"},\"panelIndex\":\"86c73d19-ecb7-4c02-a686-86f71ee27e5a\",\"embeddableConfig\":{\"attributes\":{\"title\":\"\",\"type\":\"lens\",\"visualizationType\":\"lnsXY\",\"state\":{\"datasourceStates\":{\"indexpattern\":{\"layers\":{\"f3ae26a6-2a44-4b92-aed3-281f12b9eee9\":{\"columns\":{\"c5231853-4198-48cc-9f6e-c3f6176f2971\":{\"label\":\"CD4 count results\",\"dataType\":\"string\",\"operationType\":\"range\",\"sourceField\":\"cd4.initial.result\",\"isBucketed\":true,\"scale\":\"ordinal\",\"params\":{\"type\":\"range\",\"ranges\":[{\"from\":0,\"to\":200,\"label\":\"\"},{\"from\":200,\"to\":350,\"label\":\"\"},{\"from\":350,\"to\":500,\"label\":\"\"},{\"from\":500,\"to\":null,\"label\":\"\"}],\"maxBars\":49.5,\"parentFormat\":{\"id\":\"range\",\"params\":{\"template\":\"arrow_right\",\"replaceInfinity\":true}}},\"customLabel\":true},\"cf4b3592-2548-43c9-a8e2-ca877234bd26\":{\"label\":\"Top values of registration.gender\",\"dataType\":\"string\",\"operationType\":\"terms\",\"scale\":\"ordinal\",\"sourceField\":\"registration.gender\",\"isBucketed\":true,\"params\":{\"size\":5,\"orderBy\":{\"type\":\"column\",\"columnId\":\"fcd1b636-e759-4ea0-a7a0-9db44182a62c\"},\"orderDirection\":\"desc\",\"otherBucket\":false,\"missingBucket\":false}},\"fcd1b636-e759-4ea0-a7a0-9db44182a62c\":{\"label\":\"Number of cases\",\"dataType\":\"number\",\"operationType\":\"count\",\"isBucketed\":false,\"scale\":\"ratio\",\"sourceField\":\"Records\",\"params\":{},\"customLabel\":true}},\"columnOrder\":[\"c5231853-4198-48cc-9f6e-c3f6176f2971\",\"cf4b3592-2548-43c9-a8e2-ca877234bd26\",\"fcd1b636-e759-4ea0-a7a0-9db44182a62c\"],\"incompleteColumns\":{}}}}},\"visualization\":{\"legend\":{\"isVisible\":true,\"position\":\"right\"},\"valueLabels\":\"hide\",\"fittingFunction\":\"None\",\"axisTitlesVisibilitySettings\":{\"x\":true,\"yLeft\":true,\"yRight\":true},\"tickLabelsVisibilitySettings\":{\"x\":true,\"yLeft\":true,\"yRight\":true},\"gridlinesVisibilitySettings\":{\"x\":true,\"yLeft\":true,\"yRight\":true},\"preferredSeriesType\":\"bar\",\"layers\":[{\"layerId\":\"f3ae26a6-2a44-4b92-aed3-281f12b9eee9\",\"seriesType\":\"bar\",\"accessors\":[\"fcd1b636-e759-4ea0-a7a0-9db44182a62c\"],\"xAccessor\":\"c5231853-4198-48cc-9f6e-c3f6176f2971\",\"splitAccessor\":\"cf4b3592-2548-43c9-a8e2-ca877234bd26\"}]},\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filters\":[]},\"references\":[{\"type\":\"index-pattern\",\"id\":\"42f0d8a0-0a29-11ec-8ecd-811e3f970f27\",\"name\":\"indexpattern-datasource-current-indexpattern\"},{\"type\":\"index-pattern\",\"id\":\"42f0d8a0-0a29-11ec-8ecd-811e3f970f27\",\"name\":\"indexpattern-datasource-layer-f3ae26a6-2a44-4b92-aed3-281f12b9eee9\"}]},\"enhancements\":{},\"hidePanelTitles\":false},\"title\":\"Baseline CD4 counts for patient newly started on ART\"},{\"version\":\"7.13.0\",\"type\":\"lens\",\"gridData\":{\"x\":35,\"y\":43,\"w\":13,\"h\":20,\"i\":\"771e0147-4622-4c72-9dd5-e30da47be82f\"},\"panelIndex\":\"771e0147-4622-4c72-9dd5-e30da47be82f\",\"embeddableConfig\":{\"attributes\":{\"title\":\"\",\"type\":\"lens\",\"visualizationType\":\"lnsPie\",\"state\":{\"datasourceStates\":{\"indexpattern\":{\"layers\":{\"249dbde6-04f6-4139-861c-d78ac2a3f526\":{\"columns\":{\"5bfd13b2-1342-44cc-90ac-132552e95d4a\":{\"label\":\"Count of records\",\"dataType\":\"number\",\"operationType\":\"count\",\"isBucketed\":false,\"scale\":\"ratio\",\"sourceField\":\"Records\"},\"23326fe7-b466-471d-9a2f-391dfff1e33e\":{\"label\":\"Top values of viralSuppression.currentStatus\",\"dataType\":\"string\",\"operationType\":\"terms\",\"scale\":\"ordinal\",\"sourceField\":\"viralSuppression.currentStatus\",\"isBucketed\":true,\"params\":{\"size\":5,\"orderBy\":{\"type\":\"column\",\"columnId\":\"5bfd13b2-1342-44cc-90ac-132552e95d4a\"},\"orderDirection\":\"desc\",\"otherBucket\":true,\"missingBucket\":false}}},\"columnOrder\":[\"23326fe7-b466-471d-9a2f-391dfff1e33e\",\"5bfd13b2-1342-44cc-90ac-132552e95d4a\"],\"incompleteColumns\":{}}}}},\"visualization\":{\"shape\":\"donut\",\"layers\":[{\"layerId\":\"249dbde6-04f6-4139-861c-d78ac2a3f526\",\"groups\":[\"23326fe7-b466-471d-9a2f-391dfff1e33e\",\"23326fe7-b466-471d-9a2f-391dfff1e33e\",\"23326fe7-b466-471d-9a2f-391dfff1e33e\"],\"metric\":\"5bfd13b2-1342-44cc-90ac-132552e95d4a\",\"numberDisplay\":\"percent\",\"categoryDisplay\":\"default\",\"legendDisplay\":\"default\",\"nestedLegend\":false}],\"palette\":{\"type\":\"palette\",\"name\":\"default\"}},\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filters\":[]},\"references\":[{\"type\":\"index-pattern\",\"id\":\"42f0d8a0-0a29-11ec-8ecd-811e3f970f27\",\"name\":\"indexpattern-datasource-current-indexpattern\"},{\"type\":\"index-pattern\",\"id\":\"42f0d8a0-0a29-11ec-8ecd-811e3f970f27\",\"name\":\"indexpattern-datasource-layer-249dbde6-04f6-4139-861c-d78ac2a3f526\"}]},\"enhancements\":{},\"hidePanelTitles\":false},\"title\":\"Current VL status of patients newly started on ART\"},{\"version\":\"7.13.0\",\"type\":\"visualization\",\"gridData\":{\"x\":0,\"y\":63,\"w\":24,\"h\":16,\"i\":\"b125d082-4f2b-4803-8e50-21cc035db22f\"},\"panelIndex\":\"b125d082-4f2b-4803-8e50-21cc035db22f\",\"embeddableConfig\":{\"savedVis\":{\"title\":\"\",\"description\":\"\",\"type\":\"vega\",\"params\":{\"spec\":\"{\\n  $schema: https://vega.github.io/schema/vega-lite/v5.json\\n  data: {\\n    url: {\\n      %context%: true\\n      %timefield%: death.date\\n      index: fhir-report-patient\\n      body: {\\n        size: 0\\n        aggs: {\\n          age: {\\n            range: {\\n              script: {\\n                source: if (doc['registration.birthDate'].size()==0) { return null } ZonedDateTime dob = doc['registration.birthDate'].value;Instant i = Instant.ofEpochMilli(params.reportPeriodEnd); ZonedDateTime end = ZonedDateTime.ofInstant(i, ZoneOffset.UTC);return dob.until(end, ChronoUnit.YEARS);\\n                params: {\\n                  reportPeriodEnd: {\\n                    %timefilter%: max\\n                  }\\n                }\\n              }\\n              ranges: [\\n                {\\n                  key: 0-4\\n                  to: 5\\n                }\\n                {\\n                  key: 5-9\\n                  from: 5\\n                  to: 10\\n                }\\n                {\\n                  key: 10-14\\n                  from: 10\\n                  to: 15\\n                }\\n                {\\n                  key: 15-19\\n                  from: 15\\n                  to: 20\\n                }\\n                {\\n                  key: 20-24\\n                  from: 20\\n                  to: 25\\n                }\\n                {\\n                  key: 25-29\\n                  from: 25\\n                  to: 30\\n                }\\n                {\\n                  key: 30-24\\n                  from: 30\\n                  to: 35\\n                }\\n                {\\n                  key: 35-39\\n                  from: 35\\n                  to: 40\\n                }\\n                {\\n                  key: 40-44\\n                  from: 40\\n                  to: 45\\n                }\\n                {\\n                  key: 45-49\\n                  from: 45\\n                  to: 50\\n                }\\n                {\\n                  key: 50-54\\n                  from: 50\\n                  to: 55\\n                }\\n                {\\n                  key: 55-59\\n                  from: 55\\n                  to: 60\\n                }\\n                {\\n                  key: 60-64\\n                  from: 60\\n                  to: 65\\n                }\\n                {\\n                  key: 65+\\n                  from: 65\\n                }\\n              ]\\n            }\\n            aggs: {\\n              gender: {\\n                terms: {\\n                  field: registration.gender\\n                  min_doc_count: 0\\n                }\\n              }\\n            }\\n          }\\n        }\\n      }\\n    }\\n    format: {\\n      property: aggregations.age.buckets\\n    }\\n  }\\n  mark: {\\n    type: bar\\n    tooltip: true\\n  }\\n  transform: [\\n    {\\n      flatten: [\\n        gender.buckets\\n      ]\\n      as: [\\n        gender_flat\\n      ]\\n    }\\n    {\\n      joinaggregate: [\\n        {\\n          op: sum\\n          field: gender_flat.doc_count\\n          as: total\\n        }\\n      ]\\n    }\\n    {\\n      calculate: datum.gender_flat.doc_count/datum.total * 100\\n      as: percentage\\n    }\\n  ]\\n  encoding: {\\n    x: {\\n      field: percentage\\n      type: quantitative\\n      title: % of cases\\n    }\\n    y: {\\n      field: key\\n      title: Age group\\n      sort: {}\\n    }\\n    color: {\\n      field: gender_flat.key\\n      title: Gender\\n    }\\n  }\\n  config: {\\n    kibana: {\\n      hideWarnings: true\\n    }\\n  }\\n}\"},\"uiState\":{},\"data\":{\"aggs\":[],\"searchSource\":{\"query\":{\"language\":\"kuery\",\"query\":\"\"},\"filter\":[]}}},\"hidePanelTitles\":false,\"enhancements\":{}},\"title\":\"Deaths by age and sex\"},{\"version\":\"7.13.0\",\"type\":\"lens\",\"gridData\":{\"x\":24,\"y\":63,\"w\":24,\"h\":16,\"i\":\"6c522b55-819e-42f6-bc86-5fec4709fecf\"},\"panelIndex\":\"6c522b55-819e-42f6-bc86-5fec4709fecf\",\"embeddableConfig\":{\"attributes\":{\"title\":\"\",\"type\":\"lens\",\"visualizationType\":\"lnsXY\",\"state\":{\"datasourceStates\":{\"indexpattern\":{\"layers\":{\"c3d08b56-3baa-439a-adfa-651cc273521f\":{\"columns\":{\"5e968d17-b2cb-4873-926f-1858e11e2bf7\":{\"label\":\"hivDiagnosis.hivPosDate\",\"dataType\":\"date\",\"operationType\":\"date_histogram\",\"sourceField\":\"hivDiagnosis.hivPosDate\",\"isBucketed\":true,\"scale\":\"interval\",\"params\":{\"interval\":\"auto\"}},\"d659143f-048a-45c0-955c-2ec084d63007\":{\"label\":\"Recent infections\",\"dataType\":\"number\",\"operationType\":\"cumulative_sum\",\"isBucketed\":false,\"scale\":\"ratio\",\"filter\":{\"query\":\"hivDiagnosis.recencyStatus : \\\"Recent\\\" \",\"language\":\"kuery\"},\"references\":[\"263277b2-d1a6-4f00-a313-eead50896615\"],\"customLabel\":true},\"263277b2-d1a6-4f00-a313-eead50896615\":{\"label\":\"Count of records\",\"dataType\":\"number\",\"operationType\":\"count\",\"isBucketed\":false,\"scale\":\"ratio\",\"sourceField\":\"Records\"}},\"columnOrder\":[\"5e968d17-b2cb-4873-926f-1858e11e2bf7\",\"263277b2-d1a6-4f00-a313-eead50896615\",\"d659143f-048a-45c0-955c-2ec084d63007\"],\"incompleteColumns\":{}},\"80d40f45-7a6f-497e-b05c-02b54d77ebca\":{\"columns\":{\"539711d6-07fe-4de0-97ad-922a206a6bbe\":{\"label\":\"artInitiation.date\",\"dataType\":\"date\",\"operationType\":\"date_histogram\",\"sourceField\":\"artInitiation.date\",\"isBucketed\":true,\"scale\":\"interval\",\"params\":{\"interval\":\"auto\"}},\"65132fa2-b5a3-4003-96d4-7ec328cc5721\":{\"label\":\"Initiated ART\",\"dataType\":\"number\",\"operationType\":\"cumulative_sum\",\"isBucketed\":false,\"scale\":\"ratio\",\"filter\":{\"query\":\"artInitiation.date : *\",\"language\":\"kuery\"},\"references\":[\"eb3147e6-aef8-4968-900f-e7dcba13a3d3\"],\"customLabel\":true},\"eb3147e6-aef8-4968-900f-e7dcba13a3d3\":{\"label\":\"Count of records\",\"dataType\":\"number\",\"operationType\":\"count\",\"isBucketed\":false,\"scale\":\"ratio\",\"sourceField\":\"Records\"}},\"columnOrder\":[\"539711d6-07fe-4de0-97ad-922a206a6bbe\",\"eb3147e6-aef8-4968-900f-e7dcba13a3d3\",\"65132fa2-b5a3-4003-96d4-7ec328cc5721\"],\"incompleteColumns\":{}},\"14931830-6d8c-4616-ac28-17c7975b2b1c\":{\"columns\":{\"62080d83-9c55-489f-b30a-d2528df08a69\":{\"label\":\"HIV +ve date\",\"dataType\":\"date\",\"operationType\":\"date_histogram\",\"sourceField\":\"hivDiagnosis.hivPosDate\",\"isBucketed\":true,\"scale\":\"interval\",\"params\":{\"interval\":\"auto\"},\"customLabel\":true},\"04e655d9-883e-4ebd-8e4c-412e1875020e\":{\"label\":\"HIV +ve cases\",\"dataType\":\"number\",\"operationType\":\"cumulative_sum\",\"isBucketed\":false,\"scale\":\"ratio\",\"references\":[\"4657ad2e-afb4-46cc-84db-9e8d777e0e5e\"],\"customLabel\":true},\"4657ad2e-afb4-46cc-84db-9e8d777e0e5e\":{\"label\":\"Count of records\",\"dataType\":\"number\",\"operationType\":\"count\",\"isBucketed\":false,\"scale\":\"ratio\",\"sourceField\":\"Records\"}},\"columnOrder\":[\"62080d83-9c55-489f-b30a-d2528df08a69\",\"4657ad2e-afb4-46cc-84db-9e8d777e0e5e\",\"04e655d9-883e-4ebd-8e4c-412e1875020e\"],\"incompleteColumns\":{}},\"c1d1d549-3caa-41c7-bd10-39c822acc046\":{\"columns\":{\"dd0f74d1-fa44-4489-a4f0-f4bfb3469a87\":{\"label\":\"Latest VL test date\",\"dataType\":\"date\",\"operationType\":\"date_histogram\",\"sourceField\":\"viralSuppression.current.date\",\"isBucketed\":true,\"scale\":\"interval\",\"params\":{\"interval\":\"auto\"},\"customLabel\":true},\"a4ed30d5-b0b4-41fd-baa0-0c5854d25727\":{\"label\":\"Currently virally suppressed\",\"dataType\":\"number\",\"operationType\":\"cumulative_sum\",\"isBucketed\":false,\"scale\":\"ratio\",\"filter\":{\"query\":\"viralSuppression.currentStatus : \\\"Suppressed\\\" \",\"language\":\"kuery\"},\"references\":[\"92e79173-99b4-4ecc-8d62-a6a2a911e269\"],\"customLabel\":true},\"92e79173-99b4-4ecc-8d62-a6a2a911e269\":{\"label\":\"Count of records\",\"dataType\":\"number\",\"operationType\":\"count\",\"isBucketed\":false,\"scale\":\"ratio\",\"sourceField\":\"Records\"}},\"columnOrder\":[\"dd0f74d1-fa44-4489-a4f0-f4bfb3469a87\",\"92e79173-99b4-4ecc-8d62-a6a2a911e269\",\"a4ed30d5-b0b4-41fd-baa0-0c5854d25727\"],\"incompleteColumns\":{}}}}},\"visualization\":{\"legend\":{\"isVisible\":true,\"position\":\"right\"},\"valueLabels\":\"hide\",\"fittingFunction\":\"None\",\"curveType\":\"LINEAR\",\"xTitle\":\"Event date\",\"yTitle\":\"Number of cases\",\"axisTitlesVisibilitySettings\":{\"x\":true,\"yLeft\":true,\"yRight\":true},\"tickLabelsVisibilitySettings\":{\"x\":true,\"yLeft\":true,\"yRight\":true},\"gridlinesVisibilitySettings\":{\"x\":true,\"yLeft\":true,\"yRight\":true},\"preferredSeriesType\":\"line\",\"layers\":[{\"layerId\":\"c3d08b56-3baa-439a-adfa-651cc273521f\",\"accessors\":[\"d659143f-048a-45c0-955c-2ec084d63007\"],\"position\":\"top\",\"seriesType\":\"line\",\"showGridlines\":false,\"xAccessor\":\"5e968d17-b2cb-4873-926f-1858e11e2bf7\"},{\"layerId\":\"80d40f45-7a6f-497e-b05c-02b54d77ebca\",\"seriesType\":\"line\",\"accessors\":[\"65132fa2-b5a3-4003-96d4-7ec328cc5721\"],\"xAccessor\":\"539711d6-07fe-4de0-97ad-922a206a6bbe\"},{\"layerId\":\"14931830-6d8c-4616-ac28-17c7975b2b1c\",\"seriesType\":\"line\",\"accessors\":[\"04e655d9-883e-4ebd-8e4c-412e1875020e\"],\"xAccessor\":\"62080d83-9c55-489f-b30a-d2528df08a69\",\"yConfig\":[{\"forAccessor\":\"04e655d9-883e-4ebd-8e4c-412e1875020e\",\"axisMode\":\"auto\"}]},{\"layerId\":\"c1d1d549-3caa-41c7-bd10-39c822acc046\",\"seriesType\":\"line\",\"accessors\":[\"a4ed30d5-b0b4-41fd-baa0-0c5854d25727\"],\"xAccessor\":\"dd0f74d1-fa44-4489-a4f0-f4bfb3469a87\"}]},\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filters\":[]},\"references\":[{\"type\":\"index-pattern\",\"id\":\"ddf8c1d0-16e2-11ec-a73d-8bf5308b9ada\",\"name\":\"indexpattern-datasource-current-indexpattern\"},{\"type\":\"index-pattern\",\"id\":\"62c09d50-0a29-11ec-8ecd-811e3f970f27\",\"name\":\"indexpattern-datasource-layer-c3d08b56-3baa-439a-adfa-651cc273521f\"},{\"type\":\"index-pattern\",\"id\":\"62c09d50-0a29-11ec-8ecd-811e3f970f27\",\"name\":\"indexpattern-datasource-layer-80d40f45-7a6f-497e-b05c-02b54d77ebca\"},{\"type\":\"index-pattern\",\"id\":\"62c09d50-0a29-11ec-8ecd-811e3f970f27\",\"name\":\"indexpattern-datasource-layer-14931830-6d8c-4616-ac28-17c7975b2b1c\"},{\"type\":\"index-pattern\",\"id\":\"ddf8c1d0-16e2-11ec-a73d-8bf5308b9ada\",\"name\":\"indexpattern-datasource-layer-c1d1d549-3caa-41c7-bd10-39c822acc046\"}]},\"hidePanelTitles\":false,\"enhancements\":{}},\"title\":\"Trend of sentinel events\"}]","timeRestore":false,"title":"HIV Dashboard","version":1},"coreMigrationVersion":"7.13.0","id":"0080cc60-0974-11ec-8ecd-811e3f970f27","migrationVersion":{"dashboard":"7.11.0"},"references":[{"id":"58537ec0-f140-11eb-bdb5-4d4ebeaf0cd2","name":"305f7719-e22c-4e20-952d-ddee1311dec4:control_305f7719-e22c-4e20-952d-ddee1311dec4_0_index_pattern","type":"index-pattern"},{"id":"58537ec0-f140-11eb-bdb5-4d4ebeaf0cd2","name":"305f7719-e22c-4e20-952d-ddee1311dec4:control_305f7719-e22c-4e20-952d-ddee1311dec4_1_index_pattern","type":"index-pattern"},{"id":"58537ec0-f140-11eb-bdb5-4d4ebeaf0cd2","name":"305f7719-e22c-4e20-952d-ddee1311dec4:control_305f7719-e22c-4e20-952d-ddee1311dec4_2_index_pattern","type":"index-pattern"},{"id":"58537ec0-f140-11eb-bdb5-4d4ebeaf0cd2","name":"305f7719-e22c-4e20-952d-ddee1311dec4:control_305f7719-e22c-4e20-952d-ddee1311dec4_3_index_pattern","type":"index-pattern"},{"id":"62c09d50-0a29-11ec-8ecd-811e3f970f27","name":"e0cd82f3-929a-4c32-91f6-7f8689fbe7d8:indexpattern-datasource-current-indexpattern","type":"index-pattern"},{"id":"62c09d50-0a29-11ec-8ecd-811e3f970f27","name":"e0cd82f3-929a-4c32-91f6-7f8689fbe7d8:indexpattern-datasource-layer-8a786d61-2078-441e-922c-ae1ed584d917","type":"index-pattern"},{"id":"42f0d8a0-0a29-11ec-8ecd-811e3f970f27","name":"d467e200-d740-43cf-8b3a-ab1a406c1712:indexpattern-datasource-current-indexpattern","type":"index-pattern"},{"id":"42f0d8a0-0a29-11ec-8ecd-811e3f970f27","name":"d467e200-d740-43cf-8b3a-ab1a406c1712:indexpattern-datasource-layer-3e7fbee0-0ce5-4752-bcc9-766b1d4cd06e","type":"index-pattern"},{"id":"42f0d8a0-0a29-11ec-8ecd-811e3f970f27","name":"a06e3da3-cacf-4ea6-a880-1f5b07b125ce:indexpattern-datasource-current-indexpattern","type":"index-pattern"},{"id":"42f0d8a0-0a29-11ec-8ecd-811e3f970f27","name":"a06e3da3-cacf-4ea6-a880-1f5b07b125ce:indexpattern-datasource-layer-ae112681-072e-448e-991c-7443fd69bce6","type":"index-pattern"},{"id":"ddf8c1d0-16e2-11ec-a73d-8bf5308b9ada","name":"6ae8c2b2-6bd4-4354-81be-914d0ea0dec0:indexpattern-datasource-current-indexpattern","type":"index-pattern"},{"id":"ddf8c1d0-16e2-11ec-a73d-8bf5308b9ada","name":"6ae8c2b2-6bd4-4354-81be-914d0ea0dec0:indexpattern-datasource-layer-ae112681-072e-448e-991c-7443fd69bce6","type":"index-pattern"},{"id":"241aeff0-16f0-11ec-a73d-8bf5308b9ada","name":"78f110ee-d0c6-4d10-bdce-a36957759572:indexpattern-datasource-current-indexpattern","type":"index-pattern"},{"id":"241aeff0-16f0-11ec-a73d-8bf5308b9ada","name":"78f110ee-d0c6-4d10-bdce-a36957759572:indexpattern-datasource-layer-8a786d61-2078-441e-922c-ae1ed584d917","type":"index-pattern"},{"id":"62c09d50-0a29-11ec-8ecd-811e3f970f27","name":"d959c77c-f798-4680-89a2-7d568bd3960a:indexpattern-datasource-current-indexpattern","type":"index-pattern"},{"id":"62c09d50-0a29-11ec-8ecd-811e3f970f27","name":"d959c77c-f798-4680-89a2-7d568bd3960a:indexpattern-datasource-layer-67f7ed30-e2ae-4328-8c29-14bee1247225","type":"index-pattern"},{"id":"62c09d50-0a29-11ec-8ecd-811e3f970f27","name":"4ec419d1-6589-49e8-9f49-bedfd518d475:layer_1_source_index_pattern","type":"index-pattern"},{"id":"62c09d50-0a29-11ec-8ecd-811e3f970f27","name":"4ec419d1-6589-49e8-9f49-bedfd518d475:layer_2_source_index_pattern","type":"index-pattern"},{"id":"42f0d8a0-0a29-11ec-8ecd-811e3f970f27","name":"86c73d19-ecb7-4c02-a686-86f71ee27e5a:indexpattern-datasource-current-indexpattern","type":"index-pattern"},{"id":"42f0d8a0-0a29-11ec-8ecd-811e3f970f27","name":"86c73d19-ecb7-4c02-a686-86f71ee27e5a:indexpattern-datasource-layer-f3ae26a6-2a44-4b92-aed3-281f12b9eee9","type":"index-pattern"},{"id":"42f0d8a0-0a29-11ec-8ecd-811e3f970f27","name":"771e0147-4622-4c72-9dd5-e30da47be82f:indexpattern-datasource-current-indexpattern","type":"index-pattern"},{"id":"42f0d8a0-0a29-11ec-8ecd-811e3f970f27","name":"771e0147-4622-4c72-9dd5-e30da47be82f:indexpattern-datasource-layer-249dbde6-04f6-4139-861c-d78ac2a3f526","type":"index-pattern"},{"id":"ddf8c1d0-16e2-11ec-a73d-8bf5308b9ada","name":"6c522b55-819e-42f6-bc86-5fec4709fecf:indexpattern-datasource-current-indexpattern","type":"index-pattern"},{"id":"62c09d50-0a29-11ec-8ecd-811e3f970f27","name":"6c522b55-819e-42f6-bc86-5fec4709fecf:indexpattern-datasource-layer-c3d08b56-3baa-439a-adfa-651cc273521f","type":"index-pattern"},{"id":"62c09d50-0a29-11ec-8ecd-811e3f970f27","name":"6c522b55-819e-42f6-bc86-5fec4709fecf:indexpattern-datasource-layer-80d40f45-7a6f-497e-b05c-02b54d77ebca","type":"index-pattern"},{"id":"62c09d50-0a29-11ec-8ecd-811e3f970f27","name":"6c522b55-819e-42f6-bc86-5fec4709fecf:indexpattern-datasource-layer-14931830-6d8c-4616-ac28-17c7975b2b1c","type":"index-pattern"},{"id":"ddf8c1d0-16e2-11ec-a73d-8bf5308b9ada","name":"6c522b55-819e-42f6-bc86-5fec4709fecf:indexpattern-datasource-layer-c1d1d549-3caa-41c7-bd10-39c822acc046","type":"index-pattern"}],"sort":[1632298815365,117],"type":"dashboard","updated_at":"2021-09-22T08:20:15.365Z","version":"Wzc3LDFd"}
{"attributes":{"buildNum":40865,"defaultIndex":"58537ec0-f140-11eb-bdb5-4d4ebeaf0cd2","theme:darkMode":null,"theme:version":null,"timepicker:quickRanges":"[\n  {\n    \"from\": \"now-7d\",\n    \"to\": \"now\",\n    \"display\": \"Last 7 days\"\n  },\n  {\n    \"from\": \"now-30d\",\n    \"to\": \"now\",\n    \"display\": \"Last 30 days\"\n  },\n  {\n    \"from\": \"now-90d\",\n    \"to\": \"now\",\n    \"display\": \"Last 90 days\"\n  },\n  {\n    \"from\": \"now-1y\",\n    \"to\": \"now\",\n    \"display\": \"Last 1 year\"\n  },\n  {\n    \"from\": \"2021.01.01\",\n    \"to\": \"2021.04.01\",\n    \"display\": \"Quarter 1 - 2021\"\n  },\n  {\n    \"from\": \"2021.04.01\",\n    \"to\": \"2021.07.01\",\n    \"display\": \"Quarter 2 - 2021\"\n  },\n  {\n    \"from\": \"2021.07.01\",\n    \"to\": \"2021.10.01\",\n    \"display\": \"Quarter 3 - 2021\"\n  },\n  {\n    \"from\": \"2021.10.01\",\n    \"to\": \"2022.01.01\",\n    \"display\": \"Quarter 4 - 2021\"\n  },\n  {\n    \"from\": \"2021.01.01\",\n    \"to\": \"2022.01.01\",\n    \"display\": \"Year 2021\"\n  },\n  {\n    \"from\": \"now-10y\",\n    \"to\": \"now\",\n    \"display\": \"Last 10 years\"\n  }\n]"},"coreMigrationVersion":"7.13.0","id":"7.13.0","migrationVersion":{"config":"7.13.0"},"references":[],"sort":[1632298118289,10],"type":"config","updated_at":"2021-09-22T08:08:38.289Z","version":"WzE2LDFd"}
{"attributes":{"description":"","hits":0,"kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"language\":\"kuery\",\"query\":\"\"},\"filter\":[]}"},"optionsJSON":"{\"hidePanelTitles\":false,\"useMargins\":true}","panelsJSON":"[{\"version\":\"7.13.0\",\"type\":\"visualization\",\"gridData\":{\"x\":0,\"y\":0,\"w\":41,\"h\":6,\"i\":\"d3726028-35c7-498b-bbc0-8efbad1ae278\"},\"panelIndex\":\"d3726028-35c7-498b-bbc0-8efbad1ae278\",\"embeddableConfig\":{\"savedVis\":{\"title\":\"\",\"description\":\"\",\"type\":\"markdown\",\"params\":{\"fontSize\":12,\"openLinksInNewTab\":true,\"markdown\":\"# Report 1A dashboard\\n\\n[View tabular report with graphs](http://localhost:5488/templates/6QHBqntgyC)\"},\"uiState\":{},\"data\":{\"aggs\":[],\"searchSource\":{\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filter\":[]}}},\"enhancements\":{}}},{\"version\":\"7.13.0\",\"type\":\"visualization\",\"gridData\":{\"x\":0,\"y\":6,\"w\":41,\"h\":5,\"i\":\"c468c898-0579-4c0d-97a5-cac5d6d6670c\"},\"panelIndex\":\"c468c898-0579-4c0d-97a5-cac5d6d6670c\",\"embeddableConfig\":{\"savedVis\":{\"title\":\"\",\"description\":\"\",\"type\":\"input_control_vis\",\"params\":{\"controls\":[{\"fieldName\":\"registration.facility.state\",\"id\":\"1627033083966\",\"label\":\"State\",\"options\":{\"dynamicOptions\":true,\"multiselect\":true,\"order\":\"desc\",\"size\":5,\"type\":\"terms\"},\"parent\":\"\",\"type\":\"list\",\"indexPatternRefName\":\"control_c468c898-0579-4c0d-97a5-cac5d6d6670c_0_index_pattern\"},{\"fieldName\":\"registration.facility.district\",\"id\":\"1627033108990\",\"label\":\"District\",\"options\":{\"dynamicOptions\":true,\"multiselect\":true,\"order\":\"desc\",\"size\":5,\"type\":\"terms\"},\"parent\":\"\",\"type\":\"list\",\"indexPatternRefName\":\"control_c468c898-0579-4c0d-97a5-cac5d6d6670c_1_index_pattern\"},{\"fieldName\":\"registration.facility.city\",\"id\":\"1627033124811\",\"label\":\"City\",\"options\":{\"dynamicOptions\":true,\"multiselect\":true,\"order\":\"desc\",\"size\":5,\"type\":\"terms\"},\"parent\":\"\",\"type\":\"list\",\"indexPatternRefName\":\"control_c468c898-0579-4c0d-97a5-cac5d6d6670c_2_index_pattern\"},{\"id\":\"1627033150893\",\"label\":\"Facility\",\"options\":{\"dynamicOptions\":true,\"multiselect\":true,\"order\":\"desc\",\"size\":5,\"type\":\"terms\"},\"parent\":\"\",\"type\":\"list\",\"fieldName\":\"registration.facility.name\",\"indexPatternRefName\":\"control_c468c898-0579-4c0d-97a5-cac5d6d6670c_3_index_pattern\"}],\"pinFilters\":false,\"updateFiltersOnChange\":true,\"useTimeFilter\":true},\"uiState\":{},\"data\":{\"aggs\":[],\"searchSource\":{\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filter\":[]}}},\"enhancements\":{}}},{\"version\":\"7.13.0\",\"type\":\"visualization\",\"gridData\":{\"x\":0,\"y\":11,\"w\":41,\"h\":26,\"i\":\"29810882-6bac-4029-9c9a-7a0d82a5ddb2\"},\"panelIndex\":\"29810882-6bac-4029-9c9a-7a0d82a5ddb2\",\"embeddableConfig\":{\"savedVis\":{\"title\":\"\",\"description\":\"\",\"type\":\"vega\",\"params\":{\"spec\":\"{\\n  $schema: https://vega.github.io/schema/vega-lite/v5.json\\n  data: {\\n    url: {\\n      %context%: true\\n      %timefield%: hivDiagnosis.hivPosDate\\n      index: fhir-report-patient\\n      body: {\\n        size: 0\\n        aggs: {\\n          age: {\\n            range: {\\n              script: {\\n                source: if (doc['registration.birthDate'].size()==0) { return null } ZonedDateTime dob = doc['registration.birthDate'].value;Instant i = Instant.ofEpochMilli(params.reportPeriodEnd); ZonedDateTime end = ZonedDateTime.ofInstant(i, ZoneOffset.UTC);return dob.until(end, ChronoUnit.YEARS);\\n                params: {\\n                  reportPeriodEnd: {\\n                    %timefilter%: max\\n                  }\\n                }\\n              }\\n              ranges: [\\n                {\\n                  key: 0-4\\n                  to: 5\\n                }\\n                {\\n                  key: 5-9\\n                  from: 5\\n                  to: 10\\n                }\\n                {\\n                  key: 10-14\\n                  from: 10\\n                  to: 15\\n                }\\n                {\\n                  key: 15-19\\n                  from: 15\\n                  to: 20\\n                }\\n                {\\n                  key: 20-24\\n                  from: 20\\n                  to: 25\\n                }\\n                {\\n                  key: 25-29\\n                  from: 25\\n                  to: 30\\n                }\\n                {\\n                  key: 30-24\\n                  from: 30\\n                  to: 35\\n                }\\n                {\\n                  key: 35-39\\n                  from: 35\\n                  to: 40\\n                }\\n                {\\n                  key: 40-44\\n                  from: 40\\n                  to: 45\\n                }\\n                {\\n                  key: 45-49\\n                  from: 45\\n                  to: 50\\n                }\\n                {\\n                  key: 50-54\\n                  from: 50\\n                  to: 55\\n                }\\n                {\\n                  key: 55-59\\n                  from: 55\\n                  to: 60\\n                }\\n                {\\n                  key: 60-64\\n                  from: 60\\n                  to: 65\\n                }\\n                {\\n                  key: 65+\\n                  from: 65\\n                }\\n              ]\\n            }\\n            aggs: {\\n              gender: {\\n                terms: {\\n                  field: registration.gender\\n                }\\n              }\\n            }\\n          }\\n        }\\n      }\\n    }\\n    format: {\\n      property: aggregations.age.buckets\\n    }\\n  }\\n  mark: bar\\n  transform: [\\n    {\\n      flatten: [\\n        gender.buckets\\n      ]\\n      as: [\\n        gender_flat\\n      ]\\n    }\\n  ]\\n  encoding: {\\n    x: {\\n      field: gender_flat.doc_count\\n      type: quantitative\\n      stack: normalize\\n      title: Gender proportion\\n    }\\n    y: {\\n      field: key\\n      title: Age group\\n      sort: {}\\n    }\\n    color: {\\n      field: gender_flat.key\\n      title: Gender\\n    }\\n  }\\n}\"},\"uiState\":{},\"data\":{\"aggs\":[],\"searchSource\":{\"query\":{\"language\":\"kuery\",\"query\":\"\"},\"filter\":[]}}},\"hidePanelTitles\":false,\"enhancements\":{}},\"title\":\"New HIV diagnosis by age and sex\"},{\"version\":\"7.13.0\",\"type\":\"visualization\",\"gridData\":{\"x\":0,\"y\":37,\"w\":20,\"h\":21,\"i\":\"a1975eef-ee33-4add-844d-479d91f07073\"},\"panelIndex\":\"a1975eef-ee33-4add-844d-479d91f07073\",\"embeddableConfig\":{\"savedVis\":{\"title\":\"\",\"description\":\"\",\"type\":\"vega\",\"params\":{\"spec\":\"{\\n  $schema: https://vega.github.io/schema/vega-lite/v5.json\\n  data: {\\n    url: {\\n      %context%: true\\n      %timefield%: hivDiagnosis.hivPosDate\\n      index: fhir-report-patient\\n      body: {\\n        size: 0\\n        aggs: {\\n          age: {\\n            range: {\\n              script: {\\n                source: if (doc['registration.birthDate'].size()==0) { return null } ZonedDateTime dob = doc['registration.birthDate'].value;Instant i = Instant.ofEpochMilli(params.reportPeriodEnd); ZonedDateTime end = ZonedDateTime.ofInstant(i, ZoneOffset.UTC);return dob.until(end, ChronoUnit.YEARS);\\n                params: {\\n                  reportPeriodEnd: {\\n                    %timefilter%: max\\n                  }\\n                }\\n              }\\n              ranges: [\\n                {\\n                  key: 0-4\\n                  to: 5\\n                }\\n                {\\n                  key: 05-9\\n                  from: 5\\n                  to: 10\\n                }\\n                {\\n                  key: 10-14\\n                  from: 10\\n                  to: 15\\n                }\\n                {\\n                  key: 15-19\\n                  from: 15\\n                  to: 20\\n                }\\n                {\\n                  key: 20-24\\n                  from: 20\\n                  to: 25\\n                }\\n                {\\n                  key: 25-29\\n                  from: 25\\n                  to: 30\\n                }\\n                {\\n                  key: 30-24\\n                  from: 30\\n                  to: 35\\n                }\\n                {\\n                  key: 35-39\\n                  from: 35\\n                  to: 40\\n                }\\n                {\\n                  key: 40-44\\n                  from: 40\\n                  to: 45\\n                }\\n                {\\n                  key: 45-49\\n                  from: 45\\n                  to: 50\\n                }\\n                {\\n                  key: 50-54\\n                  from: 50\\n                  to: 55\\n                }\\n                {\\n                  key: 55-59\\n                  from: 55\\n                  to: 60\\n                }\\n                {\\n                  key: 60-64\\n                  from: 60\\n                  to: 65\\n                }\\n                {\\n                  key: 65+\\n                  from: 65\\n                }\\n              ]\\n            }\\n            aggs: {\\n              gender: {\\n                terms: {\\n                  field: registration.gender\\n                }\\n              }\\n            }\\n          }\\n        }\\n      }\\n    }\\n    format: {\\n      property: aggregations.age.buckets\\n    }\\n  }\\n  transform: [\\n    {\\n      flatten: [\\n        gender.buckets\\n      ]\\n      as: [\\n        gender_flat\\n      ]\\n    }\\n  ]\\n  facet: {\\n    field: key\\n    title: Age group\\n  }\\n  spec: {\\n    mark: bar\\n    width: 35\\n    height: 400\\n    encoding: {\\n      y: {\\n        field: gender_flat.doc_count\\n        type: quantitative\\n        title: Count\\n      }\\n      x: {\\n        field: gender_flat.key\\n        axis: {\\n          title: \\\"\\\"\\n        }\\n      }\\n      color: {\\n        field: gender_flat.key\\n        title: Gender\\n      }\\n    }\\n  }\\n  config: {\\n    view: {\\n      stroke: transparent\\n    }\\n    axis: {\\n      domainWidth: 1\\n    }\\n    kibana: {\\n      hideWarnings: true\\n    }\\n  }\\n}\"},\"uiState\":{},\"data\":{\"aggs\":[],\"searchSource\":{\"query\":{\"language\":\"kuery\",\"query\":\"\"},\"filter\":[]}}},\"hidePanelTitles\":false,\"enhancements\":{}},\"title\":\"New HIV diagnosis by age and sex\"},{\"version\":\"7.13.0\",\"type\":\"visualization\",\"gridData\":{\"x\":20,\"y\":37,\"w\":21,\"h\":21,\"i\":\"d0852d43-47aa-4fe0-8a8e-8a83c2bb3bbb\"},\"panelIndex\":\"d0852d43-47aa-4fe0-8a8e-8a83c2bb3bbb\",\"embeddableConfig\":{\"savedVis\":{\"title\":\"\",\"description\":\"\",\"type\":\"vega\",\"params\":{\"spec\":\"{\\n  $schema: https://vega.github.io/schema/vega-lite/v5.json\\n  data: {\\n    url: {\\n      %context%: true\\n      %timefield%: hivDiagnosis.hivPosDate\\n      index: fhir-report-patient\\n      body: {\\n        size: 0\\n        aggs: {\\n          age: {\\n            range: {\\n              script: {\\n                source: if (doc['registration.birthDate'].size()==0) { return null } ZonedDateTime dob = doc['registration.birthDate'].value;Instant i = Instant.ofEpochMilli(params.reportPeriodEnd); ZonedDateTime end = ZonedDateTime.ofInstant(i, ZoneOffset.UTC);return dob.until(end, ChronoUnit.YEARS);\\n                params: {\\n                  reportPeriodEnd: {\\n                    %timefilter%: max\\n                  }\\n                }\\n              }\\n              ranges: [\\n                {\\n                  key: 0-4\\n                  to: 5\\n                }\\n                {\\n                  key: 5-9\\n                  from: 5\\n                  to: 10\\n                }\\n                {\\n                  key: 10-14\\n                  from: 10\\n                  to: 15\\n                }\\n                {\\n                  key: 15-19\\n                  from: 15\\n                  to: 20\\n                }\\n                {\\n                  key: 20-24\\n                  from: 20\\n                  to: 25\\n                }\\n                {\\n                  key: 25-29\\n                  from: 25\\n                  to: 30\\n                }\\n                {\\n                  key: 30-24\\n                  from: 30\\n                  to: 35\\n                }\\n                {\\n                  key: 35-39\\n                  from: 35\\n                  to: 40\\n                }\\n                {\\n                  key: 40-44\\n                  from: 40\\n                  to: 45\\n                }\\n                {\\n                  key: 45-49\\n                  from: 45\\n                  to: 50\\n                }\\n                {\\n                  key: 50-54\\n                  from: 50\\n                  to: 55\\n                }\\n                {\\n                  key: 55-59\\n                  from: 55\\n                  to: 60\\n                }\\n                {\\n                  key: 60-64\\n                  from: 60\\n                  to: 65\\n                }\\n                {\\n                  key: 65+\\n                  from: 65\\n                }\\n              ]\\n            }\\n            aggs: {\\n              gender: {\\n                terms: {\\n                  field: registration.gender\\n                }\\n              }\\n            }\\n          }\\n        }\\n      }\\n    }\\n    format: {\\n      property: aggregations.age.buckets\\n    }\\n  }\\n  transform: [\\n    {\\n      flatten: [\\n        gender.buckets\\n      ]\\n      as: [\\n        gender_flat\\n      ]\\n    }\\n  ]\\n  facet: {\\n    column: {\\n      field: gender_flat.key\\n      title: Gender\\n    }\\n  }\\n  spec: {\\n    mark: bar\\n    width: 400\\n    height: 400\\n    encoding: {\\n      y: {\\n        field: gender_flat.doc_count\\n        type: quantitative\\n        title: Count\\n      }\\n      x: {\\n        field: key\\n        axis: {\\n          title: \\\"\\\"\\n        }\\n        sort: {}\\n      }\\n      color: {\\n        field: key\\n        title: Gender\\n      }\\n    }\\n  }\\n  config: {\\n    view: {\\n      stroke: transparent\\n    }\\n    axis: {\\n      domainWidth: 1\\n    }\\n    kibana: {\\n      hideWarnings: true\\n    }\\n  }\\n}\"},\"uiState\":{},\"data\":{\"aggs\":[],\"searchSource\":{\"query\":{\"language\":\"kuery\",\"query\":\"\"},\"filter\":[]}}},\"hidePanelTitles\":false,\"enhancements\":{}},\"title\":\"New HIV diagnosis by age and sex\"}]","timeRestore":false,"title":"Report 1A","version":1},"coreMigrationVersion":"7.13.0","id":"84f2f7e0-e960-11eb-8989-876f0ccad86a","migrationVersion":{"dashboard":"7.11.0"},"references":[{"id":"58537ec0-f140-11eb-bdb5-4d4ebeaf0cd2","name":"c468c898-0579-4c0d-97a5-cac5d6d6670c:control_c468c898-0579-4c0d-97a5-cac5d6d6670c_0_index_pattern","type":"index-pattern"},{"id":"58537ec0-f140-11eb-bdb5-4d4ebeaf0cd2","name":"c468c898-0579-4c0d-97a5-cac5d6d6670c:control_c468c898-0579-4c0d-97a5-cac5d6d6670c_1_index_pattern","type":"index-pattern"},{"id":"58537ec0-f140-11eb-bdb5-4d4ebeaf0cd2","name":"c468c898-0579-4c0d-97a5-cac5d6d6670c:control_c468c898-0579-4c0d-97a5-cac5d6d6670c_2_index_pattern","type":"index-pattern"},{"id":"58537ec0-f140-11eb-bdb5-4d4ebeaf0cd2","name":"c468c898-0579-4c0d-97a5-cac5d6d6670c:control_c468c898-0579-4c0d-97a5-cac5d6d6670c_3_index_pattern","type":"index-pattern"}],"sort":[1632298118289,15],"type":"dashboard","updated_at":"2021-09-22T08:08:38.289Z","version":"WzE3LDFd"}
{"attributes":{"fieldAttrs":"{\"resource.resourceType\":{\"count\":1},\"resource.address.city\":{\"count\":1}}","fields":"[]","runtimeFieldMap":"{}","timeFieldName":"resource.meta.lastUpdated","title":"fhir-raw*"},"coreMigrationVersion":"7.13.0","id":"9a3d6200-e958-11eb-8147-3ba818db5375","migrationVersion":{"index-pattern":"7.11.0"},"references":[],"sort":[1632298118289,16],"type":"index-pattern","updated_at":"2021-09-22T08:08:38.289Z","version":"WzE4LDFd"}
{"exportedCount":9,"missingRefCount":0,"missingReferences":[]}